var App=App||{},lastCheck={point:[],angle:[],addEl:function(e,t,n){for(var i=0;i<n.length;i++)if(n[i].name=e)return void(n[i].value=t);n.push({name:e,value:t})},getEl:function(e,t){for(var n=0;n<t.length;n++)if(t[n].name=e)return t[n].value}};App.utils={events:{onWindowResize:function(){var e=App.utils.types.webgl;e.camera.aspect=window.innerWidth/window.innerHeight,e.camera.updateProjectionMatrix(),e.renderer.setSize(window.innerWidth,window.innerHeight),e.controls.handleResize(),App.utils.interfaces.render()}},types:{inputNumber:null,number:null,radiusOfMainSphere:null,sphereCenter:{},listOfPoints:[],maxNumber:999,animateSpeedOfObj:[],defaultPointColor:"009687",parent:null,accessPoint:[],webgl:{scene:null,scene2:null,skyBox:null,cubeHelper:null,objOfScene:null,container:null,camera:null,controls:null,renderer:null,listObjOfScene:[],intersectPoint:[]}},interfaces:{saveFile:function(e,t){var n=document.createElement("a");document.body.appendChild(n),n.download=t,n.href=e,n.click(),document.body.removeChild(n)},Run:function(){var e=App.utils.types.webgl;e.scene=new THREE.Scene,e.scene2=new THREE.Scene,e.scene.fog=new THREE.FogExp2(13421772,.002),e.scene2.fog=new THREE.FogExp2(13421823,.002),this.init(),this.animate()},init:function(){var e=App.utils.types.webgl,t=new THREE.DirectionalLight(16777215),n=new THREE.Mesh(new THREE.BoxGeometry(9,9,9),new THREE.MeshBasicMaterial(16711935)),i=new THREE.BoxHelper(n),r=e.camera=new THREE.PerspectiveCamera(40,window.innerWidth/window.innerHeight,.01,1e3);r.position.set(14,14,14),e.container=document.getElementById("THREEJS"),t.position.set(10,10,10),e.scene.add(t);var a=e.renderer=new THREE.WebGLRenderer({antialias:!0,preserveDrawingBuffer:!0});a.autoClear=!1,a.setClearColor(e.scene.fog.color),a.setClearColor(e.scene2.fog.color),a.setPixelRatio(window.devicePixelRatio),a.setSize(window.innerWidth,window.innerHeight),e.cubeHelper=new THREE.Object3D,e.cubeHelper.position.set(0,0,0),i.material.color.set(16711680),i.category="mainCube",e.cubeHelper.position.set(4.5,4.5,4.5),e.cubeHelper.add(i),n=new THREE.Mesh(new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:16711680})),App.rebuildCubes.add(e.cubeHelper,n),e.scene.add(e.cubeHelper),e.container.appendChild(a.domElement);var o=e.controls=new THREE.TrackballControls(r,a.domElement);o.rotateSpeed=10,o.zoomSpeed=1.2,o.panSpeed=.8,o.noZoom=!1,o.noPan=!1,o.staticMoving=!0,o.dynamicDampingFactor=.3,o.keys=[65,83,68],o.minDistance=0,o.maxDistance=300,App.rebuildSkyBox.add(),App.guiObj.init(),window.addEventListener("resize",App.utils.events.onWindowResize,!1),this.render()},render:function(){var e=App.utils.types.webgl;e.renderer.clear(),e.renderer.render(e.scene,e.camera),e.renderer.clearDepth(),e.renderer.render(e.scene2,e.camera)},removeObj:function(e){for(var t,n=App.utils.types.webgl,i=0;i<n.listObjOfScene.length;i++)t=n.listObjOfScene[i],t.name==e&&(n.scene2.remove(t.tipsObject),n.scene.remove(t),n.listObjOfScene.splice(i,1))},getObjByName:function(e){for(var t=App.utils.types.webgl.listObjOfScene,n=0;n<t.length;n++)if(t[n].name==e)return t[n]},animate:function(){var e=App.utils;requestAnimationFrame(App.utils.interfaces.animate),e.types.webgl.controls.update(),e.interfaces.render()},createSprite:function(e,t){t=t?t:{};var n,i=" "+e+" ",r=t.hasOwnProperty("fontface")?t.fontface:"Arial black",a=t.hasOwnProperty("fontsize")?t.fontsize:12,o=t.hasOwnProperty("borderThickness")?t.borderThickness:12.5,s=t.hasOwnProperty("canvasWidth")?t.canvasWidth:!1,l=t.hasOwnProperty("canvasHeight")?t.canvasHeight:!1,p=document.createElement("canvas"),u=p.getContext("2d"),d=new THREE.Texture(p),c=new THREE.SpriteMaterial({map:d,useScreenCoordinates:!1,rotation:0}),g=new THREE.Sprite(c),h=(u.measureText(i),s?s:e.length),f=6,m=6,b=p.width,v=p.height,y=15,A=25,O=s?{x:9.5,y:11}:{x:0,y:0};switch(h){case 2:b=p.width=e.length>2?16*e.length:20*e.length,n=.49;break;case 3:b=p.width=96,n=.45;break;case 4:n=.56,b=p.width=121;break;case 5:n=.65,b=p.width=121;break;case 6:n=.65,b=p.width=140;break;default:n=.56,b=p.width=30*h}return v=p.height=l?l:60,u.font="Bold "+a+"px "+r,u.fillStyle=s?"rgba(255, 255, 0, 1)":"rgba(255, 255, 255, 1)",u.lineJoin="round",u.strokeRect(f+y/2,m+y/2,b-A,v-A),u.fillRect(f+y/2,m+y/2,b-A,v-A),u.strokeStyle="rgba(255, 255, 255, 1)",u.lineWidth=s?o/2:o,u.fillStyle="rgba(0, 0, 0, 1.0)",u.fillText(i,o+O.x,a+o+O.y),d.needsUpdate=!0,d.minFilter=THREE.LinearFilter,d.renderOrder=0,e&&"_"==e&&(c.transparent=!0,c.opacity=0),g.scale.set(n,.336,.2),g},createMultipointPolygon:function(e,t){if(t>3){for(var n=new THREE.Geometry,i=0;i<e.length;i++){var r=e[i];n.vertices.push(new THREE.Vector3(r[0],r[1],r[2]));for(var a=0;a<e.length;a++)a>0&&a!=i&&n.faces.push(new THREE.Face3(i,a-1,a))}return n.computeBoundingSphere(),n}for(var o=[],i=0;i<e.length;i++)o.push(new THREE.Vector3(e[i][0],e[i][1],e[i][2]));var n=new THREE.ConvexGeometry(o);return n},tubeLineGeometry:function(e,t){var n=new THREE.SplineCurve3([e,t]),i=new THREE.TubeGeometry(n,1,.02,36);return i},animateObj:function(e){var t=App.guiObj.interfaces.getCurObjSpeed(e),n=this.getObjByName(e),i=10*t.duration,r=900,a="degree"==t.rotate;n.isAlreadySetNewGlobalPos||this.translateAllChildrenBySphereCenter(n),t&&(t.curFigSet.close(),a&&(t.curFigSet.__ul.hidden=!0),setTimeout(function(){var e=(new Date).getTime()+1e3*t.duration,o=setInterval(function(){var s=a?Math.PI/(180/t.x)/i:t.x/r,l=a?Math.PI/(180/t.y)/i:t.y/r,p=a?Math.PI/(180/t.z)/i:t.z/r;App.utils.interfaces.rotateObj(n,s,l,p),e<(new Date).getTime()&&(a&&(App.utils.interfaces.setFinalDegreeRotate(n,t),t.curFigSet.__ul.hidden=!1),clearInterval(o))},100)},1e3*t.time))},translateAllChildrenBySphereCenter:function(e){e.isAlreadySetNewGlobalPos=!0;var t=e.sphere.position;e.position.set(t.x,t.y,t.z);for(var n=e.position,i=0;i<e.children.length;i++){var r=e.children[i].position;e.children[i].position.set(r.x-n.x,r.y-n.y,r.z-n.z)}for(var a=App.utils.types.webgl.scene2.children,i=0;i<a.length;i++)if(a[i].parentNam&&a[i].parentNam==e.name){a[i].position.set(n.x,n.y,n.z);for(var o=0;o<a[i].children.length;o++){var s=a[i].children[o].position;a[i].children[o].position.set(s.x-n.x,s.y-n.x,s.z-n.x)}}},rotateObj:function(e,t,n,i){e.rotation.x+=t,e.rotation.y+=n,e.rotation.z+=i,e.tipsObject.rotation.x+=t,e.tipsObject.rotation.y+=n,e.tipsObject.rotation.z+=i},setFinalDegreeRotate:function(e,t){e.rotateRad.x+=Math.PI/(180/t.x),e.rotateRad.y+=Math.PI/(180/t.y),e.rotateRad.z+=Math.PI/(180/t.z),e.rotation.x=e.rotateRad.x,e.rotation.y=e.rotateRad.y,e.rotation.z=e.rotateRad.z,e.tipsObject.rotation.x=e.rotateRad.x,e.tipsObject.rotation.y=e.rotateRad.y,e.tipsObject.rotation.z=e.rotateRad.z},appendHtmlToolBar:function(){var e=$('<div class="row clickableTab"></div>'),t=$('<div class="col-sm-2" style="height: 21px"><img src="../assets/img/realistic_eye.png" class="eyeIcon"></div>').click(function(){objOfScene.helpers.toggleVisible(),$(this).find("img").toggle()}),n="#"+number,i=$('<div data-toggle="collapse" class="col-sm-8 collapsed" href="'+n+'">'+objOfScene.name+"</div>"),r=$('<span class="glyphicon glyphicon-chevron-down col-sm-2" data-toggle="collapse" href="'+n+'">');e.append(t),e.append(i),e.append(r),$("#figures").append(e);var a=$('<div class="row collapse" id="'+number+'" class="panel-collapse collapse"></div>'),o=$('<div class="row"><div class="col-sm-10">Display Numbers</div></div>'),s=$('<div class="row"><div class="col-sm-10">Display Lines</div></div>'),l=$('<div class="row"><div class="col-sm-10">Display Circle</div></div>'),p=$('<div class="row"><div class="col-sm-10">Fill the figure</div></div>'),u=$('<div class="row"><div class="col-sm-6">Numbers</div></div>'),d=$('<div class="row"><div class="col-sm-6">Lines</div></div>'),c=$('<div class="row"><div class="col-sm-6">Circle</div></div>'),g=$('<div class="row"><div class="col-sm-6">Fill</div></div>'),h=$('<div class="col-sm-2" style="height: 21px"><img src="../assets/img/realistic_eye.png" class="eyeIcon"></div>').click(function(){objOfScene.pointsArray.toggleVisible(),$(this).find("img").toggle()}),f=$('<div class="col-sm-2" style="height: 21px"><img src="../assets/img/realistic_eye.png" class="eyeIcon"></div>').click(function(){objOfScene.tubesArray.toggleVisible(),$(this).find("img").toggle()}),m=$('<div class="col-sm-2" style="height: 21px"><img src="../assets/img/realistic_eye.png" class="eyeIcon"></div>').click(function(){objOfScene.sphere.toggleVisible(),$(this).find("img").toggle()}),b=$('<div class="col-sm-2" style="height: 21px"><img src="../assets/img/realistic_eye.png" class="eyeIcon"></div>').click(function(){objOfScene.shape.toggleVisible(),$(this).find("img").toggle()}),v=$('<div class="col-sm-6"><input class="color" style="width: 100%" onchange="defaultPointColor=this.color.toString();"></div>').change(function(){objOfScene.pointsArray.changeColor(defaultPointColor)}),y=$('<div class="col-sm-6"><input class="color" style="width: 100%" onchange="defaultPointColor=this.color.toString();"></div>').change(function(){objOfScene.tubesArray.changeColor(defaultPointColor)}),A=$('<div class="col-sm-6"><input class="color" style="width: 100%" onchange="defaultPointColor=this.color.toString();"></div>').change(function(){objOfScene.sphere.changeColor(defaultPointColor)}),O=$('<div class="col-sm-6"><input class="color" style="width: 100%" onchange="defaultPointColor=this.color.toString();"></div>').change(function(){objOfScene.shape.changeColor(defaultPointColor)});o.append(h),a.append(o),$("#figures").append(a),s.append(f),a.append(s),$("#figures").append(a),l.append(m),a.append(l),$("#figures").append(a),p.append(b),a.append(p),$("#figures").append(a),u.append(v),a.append(u),$("#figures").append(a),d.append(y),a.append(d),$("#figures").append(a),c.append(A),a.append(c),$("#figures").append(a),g.append(O),a.append(g),$("#figures").append(a),jscolor.bind()},drawLine:function(e,t,n){var i=new THREE.LineBasicMaterial({color:16776960}),r=new THREE.Geometry;r.vertices.push(new THREE.Vector3(e.position.x,e.position.y,e.position.z)),r.vertices.push(new THREE.Vector3(t.position.x,t.position.y,t.position.z));var a=new THREE.Line(r,i);n.add(a)},toggleVisible:function(e,t){var n=App.utils.interfaces.getObjByName(e);n?n.visible=t:alert("sorry")},tipsArray:{toggleVisible:function(e,t,n){var i=App.utils.interfaces.getObjByName(e);if(i&&(n&&lastCheck.getEl(e,lastCheck.point)||i.visible))for(var r=0;r<i.tipsArray.length;r++)"point"==i.tipsArray[r].category&&(i.tipsArray[r].visible=t)},angleVisible:function(e,t,n){var i=App.utils.interfaces.getObjByName(e);if(i&&(n&&lastCheck.getEl(e,lastCheck.angle)||i.visible))for(var r=0;r<i.tipsArray.length;r++)"angle"==i.tipsArray[r].category&&(i.tipsArray[r].visible=t)}},pointsArray:{toggleVisible:function(e){var t=App.utils.interfaces.getObjByName(e);if(t)for(var n=0;n<t.pointsArray.length;n++)t.pointSphere=t.pointsArray[n],t.pointSphere.visible=t.pointSphere.visible?!1:!0},changeColor:function(e,t){var n=App.utils.interfaces.getObjByName(t);if(n)for(var i=0;i<n.pointsArray.length;i++)n.pointSphere=n.pointsArray[i],n.pointSphere.material=new THREE.MeshLambertMaterial({color:16771899}),n.pointSphere.material.color.setHex("0x"+e)}},tubesArray:{toggleVisible:function(e){var t=App.utils.interfaces.getObjByName(e);if(t)for(var n=0;n<t.tubesArray.length;n++)t.cutLine=t.tubesArray[n],t.cutLine.visible=t.cutLine.visible?!1:!0},changeColor:function(e,t){var n=App.utils.interfaces.getObjByName(t);if(n)for(var i=0;i<n.tubesArray.length;i++)n.cutLine=n.tubesArray[i],n.cutLine.material=new THREE.MeshLambertMaterial({color:16773494}),n.cutLine.material.color.setHex("0x"+e)}},sphere:{toggleVisible:function(e){var t=App.utils.interfaces.getObjByName(e);t&&(t.sphere.visible=t.sphere.visible?!1:!0)},changeColor:function(e,t){var n=App.utils.interfaces.getObjByName(t);n&&(n.sphere.material=new THREE.MeshLambertMaterial({color:16777215,transparent:!0,opacity:.2}),n.sphere.material.color.setHex("0x"+e))}},shape:{toggleVisible:function(e){var t=App.utils.interfaces.getObjByName(e);t&&(t.shape.visible=t.shape.visible?!1:!0)},changeColor:function(e,t){var n=App.utils.interfaces.getObjByName(t);n&&(n.shape.material=new THREE.MeshBasicMaterial({color:7798531,side:THREE.DoubleSide,transparent:!0,opacity:.2}),n.shape.material.color.setHex("0x"+e))},changeOpacity:function(e,t){var n=App.utils.interfaces.getObjByName(t);n&&(n.shape.material.opacity=e)}}}},App.rebuildNodes=function(e){var t,n=[],i=App.utils.types.inputNumber,r=App.utils.types.webgl;App.guiObj.listOgAngles=[],i=e,t=new THREE.Object3D,t.rotateRad={x:0,y:0,z:0},t.pointsArray=[],t.tipsArray=[],t.linesArray=[],t.tubesArray=[],t.isAlreadySetNewGlobalPos=!1,t.isAnimateObject=!0;var a,o,s="Figure "+i,l=[],p=App.guiObj.figure.isExist(s);if(p)for(var u=0;u++<p.key;)s+="*";else App.guiObj.figure.name.push({nam:s,key:0});t.name=s,t.tipsObject=new THREE.Object3D,t.tipsObject.parentNam=s,r.scene.add(t),r.scene2.add(t.tipsObject),t.helpers={listTriangles:[],intersectPoint:[],accessPoint:[],drawPoints:function(e,i){a=Math.average(i),o=Math.sphereRadius(i,a),$.each(e,function(e,i){var r=new THREE.SphereGeometry(.08,32,32),a=new THREE.MeshNormalMaterial;r.applyMatrix((new THREE.Matrix4).makeTranslation(0,0,0)),t.Sprite=App.utils.interfaces.createSprite(i[0]+""+i[1]+i[2],{fontsize:27}),t.Sprite.category="point",t.pointSphere=new THREE.Mesh(r,a),t.pointSphere.position.set(i[0],i[1],i[2]),t.Sprite.position.copy(t.pointSphere.position),t.Sprite.position.y=t.Sprite.position.y+.27,t.pointsArray.push(t.pointSphere),t.tipsArray.push(t.Sprite),t.tipsObject.add(t.Sprite),t.add(t.pointSphere),n.push(t.pointSphere)})},drawConnections:function(e){for(;e.length;){var n=e.shift();l.push(n),$.each(e,function(e,i){var r=new THREE.MeshNormalMaterial,a=new THREE.Vector3(n.position.x,n.position.y,n.position.z),o=new THREE.Vector3(i.position.x,i.position.y,i.position.z),s=App.utils.interfaces.tubeLineGeometry(a,o);t.tube=new THREE.Mesh(s,r),t.tube.line={vBegn:a,vEnd:o},t.tubesArray.push(t.tube),t.add(t.tube)})}},drawCircle:function(e){var n=a?a:Math.average(e),i=o?o:Math.sphereRadius(e,n),r=App.utils.types.sphereCenter,s=new THREE.SphereGeometry(i,32,32),l=new THREE.MeshNormalMaterial({transparent:!0,opacity:.2});t.sphere=new THREE.Mesh(s,l),t.sphere.renderOrder=2,t.add(t.sphere),e.toString().length>3?t.sphere.position.set(r.c_xy,r.c_xy,r.c_z):t.sphere.position.set(n,n,n)},drawShape:function(e,n){var i=App.utils.interfaces.createMultipointPolygon(e,n),r=new THREE.MeshBasicMaterial({color:9442024,side:THREE.DoubleSide,transparent:!0,opacity:.05});t.shape=new THREE.Mesh(i,r),t.shape.castShadow=!0,t.shape.receiveShadow=!1,t.add(t.shape)},drawCorners:function(e){var n,i,r=0,a=[];for(e.push(e[0]);r<e.length;){i=e[r++];var o,s,a=[];$.each(e,function(e,t){s=t.position,t!==i&&a.push(s)});for(var l=a.length,p=0;l>p;p++){n=new THREE.Raycaster;var u=(new THREE.Vector3).subVectors(a[p],i.position);n.set(i.position,u.clone().normalize()),o=n.intersectObjects(t.tubesArray,!0);for(var d=0;d<o.length;d++){var c=Math.round(o[d].point.x),g=Math.round(o[d].point.y),h=Math.round(o[d].point.z),f=c+""+g+h;a[p].x==c&&a[p].y==g&&a[p].z==h?r<e.length&&e[r].position!=a[p]&&this.createAngle(e[r].position,i.position,a[p]):this.checkIntersectPoint(f)?this.checkAccesessIntersectPoint(f,i.position)&&this.createAngle(o[d],i,!1):(this.intersectPoint.push(f),this.accessPoint.push({key:a[p],value:f}),this.createAngle(o[d],i,!1))}}}this.intersectPoint=this.accessPoint=[]},createAngle:function(e,n,i){var r,a,o=[];i?(r=Math.getCornerBtwTwoVercorsAndIntrsctinPnt(e,n,i),a=Math.getPositionForValueOfCorner(n,i,e,!1),o.push({angle:parseFloat(r),position:a})):(r=Math.getCornerBtwTwoVercorsAndIntrsctinPnt(e.object.line.vBegn,n.position,e.point),a=Math.getPositionForValueOfCorner(n.position,e.point,e.object.line.vBegn,!1),o.push({angle:parseFloat(r),position:a}),r=Math.getCornerBtwTwoVercorsAndIntrsctinPnt(e.object.line.vEnd,n.position,e.point),a=Math.getPositionForValueOfCorner(n.position,e.point,e.object.line.vEnd,!1),o.push({angle:parseFloat(r),position:a}));for(var s=this.checkCorrectAnge(o),l=0;l<s.length;l++)App.guiObj.listOgAngles.push(s[l].angle+"째"),t.Sprite=App.utils.interfaces.createSprite(s[l].angle+"째",{fontsize:12,borderThickness:1,canvasWidth:2,canvasHeight:39}),t.Sprite.position.set(s[l].position.x,s[l].position.y,s[l].position.z),t.Sprite.category="angle",t.tipsArray.push(t.Sprite),t.tipsObject.add(t.Sprite)},checkAccesessIntersectPoint:function(e,t){for(var n=0;n<this.accessPoint.length;n++)if(this.accessPoint[n].value==e)return this.accessPoint[n].key==t},checkIntersectPoint:function(e){for(var t=0;t<this.intersectPoint.length;t++)if(this.intersectPoint[t]==e)return!0},setCurrentObj:function(e){for(var t=0;t<this.listTriangles.length;t++)if(e==this.listTriangles[t].point)return void(this.listTriangles[t].value+=1);this.listTriangles.push({point:e,value:0})},checkCorrectAnge:function(e){for(var t=[],n=0,i=0;i<e.length;i++){var r=Math.round(e[i].angle);n+=r,t.push({angle:r,position:e[i].position})}return 2*n==360||1==e.length?t:(e[0].angle=Math.floor(e[0].angle),e[1].angle=Math.floor(e[1].angle),e)},init:function(e,t,n,i){this.drawPoints(e,n),this.drawConnections(t),this.drawCircle(n),this.drawShape(e,n),n.toString().length<5&&this.drawCorners(i)}},t.helpers.init(App.utils.types.listOfPoints,n,inputNumber,l),App.utils.types.webgl.listObjOfScene.push(t)},App.rebuildCubes={changeColorLittleCubes:function(e){for(var t,n=App.utils.types.webgl.cubeHelper,i=0;i<n.children.length;i++)t=n.children[i],t.category&&"littleCube"==t.category&&t.children[0].material.color.set(e)},changeColorMainCube:function(e){for(var t,n=App.utils.types.webgl.cubeHelper,i=0;i<n.children.length;i++)if(t=n.children[i],t.category&&"mainCube"==t.category)return void t.material.color.set(e)},setVisibleForChild:function(e,t){for(var n,i=App.utils.types.webgl.cubeHelper,r=0;r<i.children.length;r++)n=i.children[r],n.category&&n.category==t&&(n.visible=e)},add:function(e,t){for(var n=App.utils.interfaces.createSprite,i=-4;6>i;i++){var r=t.clone(),a=new THREE.BoxHelper(r);a.material.color.set(255);var o=new THREE.Object3D;o.category="littleCube",o.add(a),o.position.set(i,0,0);var s=n(i+4+"00",{fontsize:27});s.position.set(i-.5,0,0),s.category="cubeLabel",e.add(s),5>i&&e.add(o);for(var l=-4;6>l;l++){var p=t.clone(),u=new THREE.BoxHelper(p);u.material.color.set(255);var d=new THREE.Object3D;d.category="littleCube",d.add(u),d.position.set(i,l,0),5>i&&5>l&&e.add(d);var c=n(i+4+""+(l+4)+0,{fontsize:27});c.position.set(i-.5,l-.5,0),c.category="cubeLabel",e.add(c);for(var g=-4;6>g;g++){var h=t.clone(),f=new THREE.BoxHelper(h);f.material.color.set(255);var m=new THREE.Object3D;m.category="littleCube",m.add(f),m.position.set(i,l,g),5>i&&5>l&&5>g&&e.add(m);var b=n(i+4+""+(l+4)+(g+4),{fontsize:27});b.position.set(i-.5,l-.5,g-.5),b.category="cubeLabel",e.add(b)}}}}},App.rebuildSkyBox={changeBackground:function(e){var t,n=App.utils.types.webgl.skyBox;switch(n.visible=!0,e){case"mountain":t=["img/dawnmountain-xpos.png","img/dawnmountain-xneg.png","img/dawnmountain-ypos.png","img/dawnmountain-yneg.png","img/dawnmountain-zpos.png","img/dawnmountain-zneg.png"];break;case"siege":t=["img/siege_ft.png","img/siege_bk.png","img/siege_up.png","img/siege_dn.png","img/siege_rt.png","img/siege_lf.png"];break;case"starfield":t=["img/starfield_ft.png","img/starfield_bk.png","img/starfield_up.png","img/starfield_dn.png","img/starfield_rt.png","img/starfield_lf.png"];break;case"misty":t=["img/misty_ft.png","img/misty_bk.png","img/misty_up.png","img/misty_dn.png","img/misty_rt.png","img/misty_lf.png"];break;case"tidepool":t=["img/tidepool_ft.png","img/tidepool_bk.png","img/tidepool_up.png","img/tidepool_dn.png","img/tidepool_rt.png","img/tidepool_lf.png"];break;case"NONE":return void(n.visible=!1)}for(var i=[],r=0;6>r;r++){var a=new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture(t[r]),side:THREE.BackSide});i.push(a)}n.material=new THREE.MeshFaceMaterial(i)},add:function(){for(var e,t=["img/dawnmountain-xpos.png","img/dawnmountain-xneg.png","img/dawnmountain-ypos.png","img/dawnmountain-yneg.png","img/dawnmountain-zpos.png","img/dawnmountain-zneg.png"],n=[],i=new THREE.BoxGeometry(500,500,500),r=0;6>r;r++)n.push(new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture(t[r]),side:THREE.BackSide}));e=new THREE.Mesh(i,t),e.visible=!1,App.utils.types.webgl.scene.add(e),App.utils.types.webgl.skyBox=e}},App.guiObj={numberField:null,item:[],listOgAngles:null,btn:null,name:null,maxNumber:null,gui:null,animateSpeedOfObj:[],folders:{menuFolder:null,generationFolder:null,editFolder:null,keysFolder:null,anglesFolder:null,revoModeFolder:null,figureAnimateSet:null,generalAnimateSet:null,coord:null,generalSet:null},generateParameters:{moreThan3:!1,number:0,coords:"",generate:function(){App.rebuildNodes(App.guiObj.name),App.guiObj.isSceneNotEmpty||(App.guiObj.isSceneNotEmpty=!0,App.guiObj.addLastFolders()),App.guiObj.interfaces.addEditInfo(inputNumber)},startAnimation:function(){for(var e=!1,t=App.utils.types.webgl.listObjOfScene,n=0;n<t.length;n++)t[n].isAnimateObject&&(e=!0,App.utils.interfaces.animateObj(t[n].name));e||alert("you do not have any object to animate")},generalSet:{duration:180,lastDuratValue:180},maxGenereDurtn:180,cubeVisible:!0,mainCubeColor:16515220,littleCubesColor:796663,listTexture:[],getScreen:function(){var e="image/jpeg",t=App.utils.types.webgl.renderer.domElement.toDataURL(e);App.utils.interfaces.saveFile(t.replace(e,"image/octet-stream"),"point.jpg")}},figure:{name:[],isExist:function(e){for(var t=0;t<this.name.length;t++)if(this.name[t].nam==e)return this.name[t].key+=1,this.name[t]}},keys:{listValues:[],listKeys:[],getListOfFigures:function(e,t){for(var n,i=this.getUnigueFigure(e,t),r=0;r<i.length;r++)n=App.numberWorker.generate(i[r],!0),this.listValues.push({key:i[r],val:n.arr,size:n.sum});return this.listValues},getUnigueFigure:function(e,t){for(var n=[],i=e;t>i;i++){var r=i.toString().split("");r.sort(function(e,t){return t>e?1:e>t?-1:e==t?0:void 0});for(var a="",o=0;o<r.length;o++){var s=0==r[o]?"0":r[o];a+=s}a=parseInt(a);for(var l=!1,p=0;p<n.length;p++)n[p]==a&&(l=!0);l||n.push(a)}return n},contains:function(e,t){for(var n,i,r=0;r<e.length;r++)for(var a=0;a<t.length;a++)if(n=e[r].val[a],i=t[a],n&&n[0]+""+n[1]+n[2]==i[0]+""+i[1]+i[2])return!0;return!1},getSumValOfArr:function(e){for(var t=0,n=0;n<e.length;n++)t+=parseInt(e[n][0]+""+e[n][1]+e[n][2]);return t}},init:function(){this.gui=new dat.GUI(window.innerWidth<800?{width:290}:{width:255}),this.gui.open(),this.folders.menuFolder=this.gui.addFolder("Menu"),this.folders.menuFolder.add(App.guiObj.generateParameters,"getScreen").name("ScreenShot"),this.folders.menuFolder.open(),this.folders.generationFolder=this.folders.menuFolder.addFolder("Generation"),this.folders.keysFolder=this.folders.menuFolder.addFolder("List of the Keys"),this.folders.generalSet=this.folders.menuFolder.addFolder("General Settings"),this.interfaces.addGenerationFold(),this.interfaces.generalSetFolders(this.folders.generalSet,App.guiObj.generateParameters),this.interfaces.keysFolderGenerate(this.folders.keysFolder),$(".hue-field").width(10),$("select").css("color","black")},addLastFolders:function(){var e=this.folders.generalAnimateSet,t=this.folders.revoModeFolder,n=this.generateParameters;this.folders.editFolder=this.folders.menuFolder.addFolder("Edit"),this.folders.anglesFolder=this.folders.menuFolder.addFolder("Angles and Surfaces"),t=this.folders.revoModeFolder=this.folders.menuFolder.addFolder("Revolution Mode"),this.folders.figureAnimateSet=this.folders.revoModeFolder.addFolder("Figure Settings"),e=this.folders.generalAnimateSet=this.folders.revoModeFolder.addFolder("General Settings"),e.add(n.generalSet,"duration").min(0).max(180).step(1).onChange(function(e){n.generalSet.lastDuratValue=e,App.guiObj.interfaces.setMaxTimeForAnimationFigures(e)}),t.add(n,"startAnimation").name("Begin")},interfaces:{addGenerationFold:function(){var e=App.guiObj.folders.generationFolder,t=App.guiObj.numberField,n=App.guiObj.maxNumber,i=App.guiObj.btn,r=App.guiObj.folders.coord,a=App.guiObj.item,o=App.guiObj.generateParameters;e.add(o,"moreThan3").name("> 3-digit number").onChange(function(s){var l=App.utils.types.listOfPoints;n=s?99999:999,e.__controllers.slice(e.__controllers.indexOf(t),1),$(".cr.number.has-slider").eq(0).remove(),o.number=0,l&&App.guiObj.interfaces.clearGenerationFolder(e,a,i),t=e.add(o,"number",100).max(n).step(1).name("Enter Coordinates:").onChange(function(t){if(App.guiObj.isGeneratePointAvialaable||(App.guiObj.isGeneratePointAvialaable=!0,r=App.guiObj.folders.coord=App.guiObj.folders.generationFolder.addFolder("Coordinates")),App.guiObj.name=t,isNaN(t))alert("Please, input a number.");else{l&&App.guiObj.interfaces.clearGenerationFolder(e,a,i),inputNumber=t,App.utils.types.listOfPoints=l=App.numberWorker.generate(inputNumber);for(var n=0;n<l.length;n++)o.coords=l[n][0]+","+l[n][1]+","+l[n][2],a[n]=r.add(o,"coords").name("Coordinate "+n);i=e.add(o,"generate"),i.name("Create!")}})}),t=e.add(o,"number",100).max(999).step(1).name("Enter Coordinates:").onChange(function(t){var n=App.utils.types.listOfPoints;if(App.guiObj.isGeneratePointAvialaable||(App.guiObj.isGeneratePointAvialaable=!0,r=App.guiObj.folders.coord=App.guiObj.folders.generationFolder.addFolder("Coordinates")),App.guiObj.name=t,isNaN(t))alert("Please, input a three-digit number.");else{n&&App.guiObj.interfaces.clearGenerationFolder(e,a,i),inputNumber=t,App.utils.types.listOfPoints=n=App.numberWorker.generate(inputNumber);for(var s=0;s<n.length;s++)o.coords[s]=[],o.coords=n[s][0]+","+n[s][1]+","+n[s][2],a[s]=r.add(o,"coords").name("Coordinate "+s);i=e.add(o,"generate"),i.name("Create!")}})},clearGenerationFolder:function(e,t,n){for(var i=App.utils.types.listOfPoints,r=0;r<i.length;r++)t[r]&&(t[r].domElement.remove(),e.remove(t[r]));i&&n&&e.remove(n)},addEditInfo:function(){var e={visible:!0,opacity:5,figure:{displayNumbers:!0,displayPoints:!0,displayLines:!0,displayCircle:!0,fillFigure:!0,agleShow:!0},colorNumbers:"#9012e8",colorTubes:"#22a6cf",colorCircle:"#22a6cf",colorFill:"#22a6cf",remove:function(){}},t=App.utils.types.webgl.listObjOfScene,n=t[t.length-1].name,i=App.guiObj.folders.editFolder.addFolder(n);i.id=n,lastCheck.addEl(n,!0,lastCheck.point),lastCheck.addEl(n,!0,lastCheck.angle),i.add(e.figure,"displayPoints").name("Display Points").onChange(function(e){App.utils.interfaces.tipsArray.toggleVisible(n,e),App.utils.interfaces.pointsArray.toggleVisible(n),lastCheck.addEl(n,e,lastCheck.point)}),i.add(e.figure,"agleShow").name("Display Angles").onChange(function(e){App.utils.interfaces.tipsArray.angleVisible(n,e),lastCheck.addEl(n,e,lastCheck.angle)}),i.add(e.figure,"displayLines").name("Display Lines").onChange(function(){App.utils.interfaces.tubesArray.toggleVisible(n)}),i.add(e.figure,"displayCircle").name("Display Sphere").onChange(function(){App.utils.interfaces.sphere.toggleVisible(n)}),i.add(e.figure,"fillFigure").name("Display Figure").onChange(function(){App.utils.interfaces.shape.toggleVisible(n)}),i.add(e,"visible").name("Global Visible").onChange(function(e){App.utils.interfaces.tipsArray.toggleVisible(n,e,!0),App.utils.interfaces.tipsArray.angleVisible(n,e,!0),App.utils.interfaces.toggleVisible(n,e)}),i.addColor(e,"colorNumbers").name("Color Numbers").onChange(function(e){App.utils.interfaces.pointsArray.changeColor(e.substr(1),n)}),i.addColor(e,"colorCircle").name("Color Sphere").onChange(function(e){App.utils.interfaces.sphere.changeColor(e.substr(1),n)}),i.addColor(e,"colorTubes").name("Color Tubes").onChange(function(e){App.utils.interfaces.tubesArray.changeColor(e.substr(1),n)}),i.addColor(e,"colorFill").name("Color Figure").onChange(function(e){App.utils.interfaces.shape.changeColor(e.substr(1),n)}),i.add(e,"opacity").min(0).max(100).step(10).name("Fill Transparency").onChange(function(e){App.utils.interfaces.shape.changeOpacity(e/100,n)}),i.add(e,"remove").name("Drop "+n).onChange(function(){App.utils.interfaces.removeObj(n),App.guiObj.interfaces.removeFigure(n)}),this.addRevolModeData(n),this.addFigureInfo(n),$(".hue-field").width(10)},addRevolModeData:function(e){var t,n={figureSet:{startT:0,durationAn:0,x:0,y:0,z:0},timeFigureBegn:0,curStrtDurtnAnmt:[],rotate:[]};t=App.guiObj.folders.figureAnimateSet.addFolder(e),t.add(n,"rotate",["degree","step"]).name("Rotate by").onChange(function(t){App.guiObj.interfaces.getCurObjSpeed(e).rotate=t}),t.add(n.figureSet,"x").min(-720).max(720).step(1).name("X").onChange(function(t){App.guiObj.interfaces.getCurObjSpeed(e).x=t}),t.add(n.figureSet,"y").min(-720).max(720).step(1).name("Y").onChange(function(t){App.guiObj.interfaces.getCurObjSpeed(e).y=t}),t.add(n.figureSet,"z").min(-720).max(720).step(1).name("Z").onChange(function(t){App.guiObj.interfaces.getCurObjSpeed(e).z=t}),$("select").css("color","black"),this.addFigureAnimSet(t,e,n)},addFigureAnimSet:function(e,t){var n,i,r={figureSet:{startT:0,durationAn:0,x:0,y:0,z:0},timeFigureBegn:0,curStrtDurtnAnmt:[]},a=App.guiObj.generateParameters,n=e.add(r.figureSet,"startT").min(0).max(a.generalSet.lastDuratValue).step(1).name("Start Animation");n.onChange(function(e){var n=App.guiObj.interfaces.getCurObjSpeed(t);n.time=e,App.guiObj.interfaces.addNewDuration(a.generalSet.lastDuratValue-e,n,t)}),i=e.add(r.figureSet,"durationAn").min(0).max(a.generalSet.lastDuratValue).step(1).name("Animate Duration"),i.onChange(function(e){App.guiObj.interfaces.getCurObjSpeed(t).duration=e}),this.addOrSetAnmtSpeeObj(t,n,i,e)},addNewDuration:function(e,t,n){t.durAn.domElement.remove(),t.curFigSet.remove(t.durAn);var i={durationAn:0},r=t.curFigSet.add(i,"durationAn").min(0).max(e).step(1).name("Animate Duration");r.onChange(function(e){App.guiObj.interfaces.getCurObjSpeed(n).duration=e}),this.addOrSetAnmtSpeeObj(n,null,r,t)},addOrSetAnmtSpeeObj:function(e,t,n,i){for(var r=App.guiObj.animateSpeedOfObj,a=0;a<r.length;a++)if(r[a].name==e)return t&&(r[a].startAn=t),void(n&&(r[a].durAn=n));r.push({name:e,x:0,y:0,z:0,time:0,duration:0,startAn:t,durAn:n,curFigSet:i,rotate:"degree"})},setMaxTimeForAnimationFigures:function(){for(var e=App.guiObj.animateSpeedOfObj,t=0;t<e.length;t++){var n=e[t];n.startAn.domElement.remove(),n.durAn.domElement.remove(),n.curFigSet.remove(n.startAn),n.curFigSet.remove(n.durAn),this.addFigureAnimSet(n.curFigSet,n.name)}},getCurObjSpeed:function(e){for(var t=App.guiObj.animateSpeedOfObj,n=0;n<t.length;n++)if(t[n].name==e)return t[n]},generalSetFolders:function(e,t){e.add(t,"cubeVisible").name("Main Visible").onChange(function(e){App.utils.types.webgl.cubeHelper.visible=e}),e.add(t,"cubeVisible").name("Cube Visible").onChange(function(e){App.utils.types.webgl.cubeHelper.getObjectByProperty("category","mainCube").visible=e}),e.add(t,"cubeVisible").name("Cubes Visible").onChange(function(e){App.rebuildCubes.setVisibleForChild(e,"littleCube")}),e.add(t,"cubeVisible").name("Point Label Visible").onChange(function(e){App.rebuildCubes.setVisibleForChild(e,"cubeLabel")}),e.addColor(t,"mainCubeColor").name("Main Cube Color").onChange(function(e){App.rebuildCubes.changeColorMainCube(e)}),e.addColor(t,"littleCubesColor").name("Color for cubes").onChange(function(e){App.rebuildCubes.changeColorLittleCubes(e)}),e.add(t,"listTexture",["NONE","mountain","siege","starfield","misty","tidepool"]).name("Background").onChange(function(e){App.rebuildSkyBox.changeBackground(e)})},keysFolderGenerate:function(e){for(var t,n,i={square:0,sum:0,size:0,addFigure:function(){},angles:{angle:0,name:""}},r=App.guiObj.keys.getListOfFigures(100,999),a=0;a<r.length;a++){var o=r[a].key;i.size=r[a].size.toString(),t=Math.figureDataByPoints(r[a].val),n=t.angle;var s=e.addFolder("Figure "+o);i.square=t.square.toString(),i.sum=t.sum.toString();for(var l=s.addFolder("Corner's"),p=0;p<n.length;p++)i.angles.angle=n[p]+"째",l.add(i.angles,"angle").name("Angle "+p).__input.disabled=!0;s.add(i,"square").name("Square").__input.disabled=!0,s.add(i,"sum").name("Sum").__input.disabled=!0,s.add(i,"size").name("Size").__input.disabled=!0,s.add(i,"addFigure").name("Add this Figure "+a).onChange(function(){App.guiObj.isSceneNotEmpty||(App.guiObj.isSceneNotEmpty=!0,App.guiObj.addLastFolders());
var e=this.__li.textContent,t=parseInt(e.substr(15)),n=r[t].key;App.utils.types.listOfPoints=r[t].val,App.guiObj.name=inputNumber=n,App.rebuildNodes(n),App.guiObj.interfaces.addEditInfo(n)})}},addFigureInfo:function(e){var t=App.guiObj.folders.anglesFolder.addFolder(e),n=null,i={square:null,angle:null,triangleSquare:null},r=App.utils.types.listOfPoints;if(r){n=Math.figureDataByPoints(r),i.square=n.square.toString(),t.add(i,"square").name("General Square").__input.disabled=!0;for(var a=t.addFolder("Square SubFigures"),o=t.addFolder("Angles"),s=o.addFolder("Main Angles"),l=0;l<n.squareFigs.length;l++)i.triangleSquare=n.squareFigs[l].toString(),a.add(i,"triangleSquare").name("Sub Figure "+l).__input.disabled=!0;for(var l=0;l<n.angle.length;l++)i.angle=n.angle[l]+"째",s.add(i,"angle").name("Angle "+l).__input.disabled=!0;3==n.angle.length&&App.guiObj.listOgAngles.pop();for(var l=0;l<App.guiObj.listOgAngles.length;l++)i.angle=App.guiObj.listOgAngles[l],o.add(i,"angle").name("Angle "+l).__input.disabled=!0}},removeFigure:function(e){var t=App.guiObj.folders.editFolder,n=App.guiObj.folders.anglesFolder,i=App.guiObj.folders.figureAnimateSet;t.__folders[e].__ul.remove(),n.__folders[e].__ul.remove(),i.__folders[e].__ul.remove(),t.close(),n.close(),i.close()}}},App.numberWorker={generate:function(e,t){var n=this.splitNumToArr(e),i=this.combinations(n),r=[];if($("#coords").html(""),e.toString().length>3)for(var a,o,s=0;s<i.length;s++){r[s]=[],r[s][0]=i[s][0],r[s][1]=i[s][1],r[s][2]=i[s][2],a=0,o=10;for(var l=3;l<i[s].length;l++)a=i[s][l]/o,o*=10,r[s][2]+=a;r[s][2]=this.roundPlus(r[s][2],e.toString().length-3)}else r=i;for(var s=0;s<r.length;s++)$("#coords").append(r[s]+"<br>");var p={},u=0,r=r.filter(function(e){var n=e in p;return t&&!n&&(u+=parseInt(e[0]+""+e[1]+e[2])),n?0:p[e]=1});return r=this.sortMasiveOfPoints(r),t?{arr:r,sum:u}:r},splitNumToArr:function(e){for(var t=[],n=1,i=0;i<e.toString().length;i++)t.unshift((e/n|0)%10),n=10*n;return t},combinations:function(e){var t,n,i,r,a=e.length;n=[[e[0]]];var o=0;for(r=1;a>r;r++)i=e[r],t=n,n=[],t.forEach(function(e){var t=App.numberWorker.crtNumObj(e,i);if(n=n.concat(t),t.length>2)for(var r=0;r<t.length;r++)o+=parseInt(t[r][0]+""+t[r][1]+t[r][2])});return n},crtNumObj:function(e,t,n){var i,r,a=e.length,o=[],s=0;for(i=a;i>=0;i--){var l=e.slice(0,i),p=[t],u=e.slice(i,r);o.push([].concat(l,p,u)),n&&(s+=l&&p&&u?parseInt(l+""+p+u):0,console.log(l+""+p+u))}return n?{res:o,sum:s}:o},roundPlus:function(e,t){if(isNaN(e)||isNaN(t))return!1;var n=Math.pow(10,t);return Math.round(e*n)/n},sortMasiveOfPoints:function(e){function t(e){for(var t=0;t<r.length;t++)if(e==r[t])return!0;return!1}for(var n,i=e,r=[],a=!0,o=0;o<i.length;o++){a&&(a=!1,n=i[o],r.push(n));for(var s=[],l=0;l<i.length;l++)n==i[l]||t(i[l])||s.push({dist:Math.sqrt((i[l][0]-n[0])*(i[l][0]-n[0])+(i[l][1]-n[1])*(i[l][1]-n[1])+(i[l][2]-n[2])*(i[l][2]-n[2])),obj:i[l]});for(var p={dist:1e5,obj:0},l=0;l<s.length;l++)p.dist>s[l].dist&&(p.dist=s[l].dist,p.obj=s[l].obj);n=p.obj,r.push(p.obj)}return r.pop(),r}},Math.figureDataByPoints=function(e){var t,n=0,i=[],r=0,a=[],o=e[e.length-1],s=e[0];if(e.length>2){for(var l=1;l<e.length&&l+1<e.length;l++)t=e[l],i.push(this.getSquareByPoints(e[0],t,e[l+1])),n+=i[i.length-1],a.push(this.round(Math.getCornerBtwTwoVercorsAndIntrsctinPnt(s,e[l+1],t,!1,!0))),s=e[l];a.push(this.round(Math.getCornerBtwTwoVercorsAndIntrsctinPnt(e[e.length-2],e[0],o,!1,!0))),a.push(this.round(Math.getCornerBtwTwoVercorsAndIntrsctinPnt(e[1],o,e[0],!1,!0)))}else a.push(0);return r+=e[0][0]+e[0][1]+e[0][2],{squareFigs:i,square:n,sum:r,angle:a}},Math.getSquareByPoints=function(e,t,n){var i,r,a,o,s,l,p;return s=e[0]-t[0],l=e[1]-t[1],p=e[2]-t[2],r=this.sqrt(s*s+l*l+p*p),s=e[0]-n[0],l=e[1]-n[1],p=e[2]-n[2],a=this.sqrt(s*s+l*l+p*p),s=t[0]-n[0],l=t[1]-n[1],p=t[2]-n[2],o=this.sqrt(s*s+l*l+p*p),i=(r+a+o)/2,this.sqrt(i*(i-r)*(i-a)*(i-o))},Math.getCornerBtwTwoVercorsAndIntrsctinPnt=function(e,t,n,i,r){i&&objOfScene.helpers.listTriangles.push({point1:e,point2:t,endPoint:i});var a=r?new THREE.Vector3(e[0]-n[0],e[1]-n[1],e[2]-n[2]):new THREE.Vector3(e.x-n.x,e.y-n.y,e.z-n.z),o=r?new THREE.Vector3(t[0]-n[0],t[1]-n[1],t[2]-n[2]):new THREE.Vector3(t.x-n.x,t.y-n.y,t.z-n.z),s=a.x*o.x+a.y*o.y+a.z*o.z,l=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),p=Math.sqrt(o.x*o.x+o.y*o.y+o.z*o.z),u=180*Math.acos(s/(l*p))/Math.PI;return u},Math.getPositionForValueOfCorner=function(e,t,n,i){for(var r=0,a=this.getAverageValueOfHighForTriangle(e,n),o=this.getAverageValueOfHighForTriangle(a,t);r++<3;)o=this.getAverageValueOfHighForTriangle(o,t);return i&&(o=this.getAverageValueOfHighForTriangle(o,t)),o},Math.getAverageValueOfHighForTriangle=function(e,t){var n={};return n.x=(e.x+t.x)/2,n.y=(e.y+t.y)/2,n.z=(e.z+t.z)/2,n},Math.average=function(e){for(var t=0,n=0;e>0;){var i=e%10;t+=i,e=e/10|0,n++}var r=t/n;return App.utils.types.webgl.controls.target.set(r,r,r),r},Math.sphereRadius=function(e,t){var n,i,r,a,o=e,s=0,l=0,p=App.utils.types.listOfPoints,u={};if(e.toString().length>3){var d=Math.pow(10,e.toString().length-3);e/=d;for(var c=0;c<p.length;c++)s+=p[c][0],l+=p[c][2];u.c_xy=r=s/p.length,u.c_z=a=l/p.length,App.utils.types.sphereCenter=u}return o=e%10,i=(e/10|0)%10,n=(e/100|0)%10,e.toString().length>3?Math.getMaxRadius({c_xy:r,c_z:a}):Math.sqrt((n-t)*(n-t)+(i-t)*(i-t)+(o-t)*(o-t))},Math.getMaxRadius=function(e){for(var t,n,i=0,r=App.utils.types.listOfPoints,a=0;a<r.length;a++)t=Math.sqrt((r[a][0]-e.c_xy)*(r[a][0]-e.c_xy)+(r[a][1]-e.c_xy)*(r[a][1]-e.c_xy)+(r[a][2]-e.c_z)*(r[a][2]-e.c_z)),t>i&&(i=t,n=r[a]);return i},$(document).ready(function(){new Date;App.utils.interfaces.Run()});